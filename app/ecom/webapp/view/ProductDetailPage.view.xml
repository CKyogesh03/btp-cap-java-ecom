<mvc:View
    controllerName="ecom.controller.ProductDetailPage"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:layout="sap.ui.layout">

    <Page
        id="productDetailPage"
        title="Product Details"
        showNavButton="true"
        navButtonPress=".onNavBack">

        <content>
            <!-- FlexBox with renderType="Bare" ensures it acts like a normal div -->
            <FlexBox 
                width="100%" 
                direction="Row" 
                wrap="Wrap" 
                renderType="Bare"
                class="sapUiResponsiveMargin">

                <!-- Left Column (Image) -->
                <VBox class="sapUiMediumMarginEnd sapUiSmallMarginBottom">
                    <layoutData>
                        <!-- This forces the image container to take up 40% width -->
                        <FlexItemData baseSize="40%" growFactor="1" />
                    </layoutData>
                    <Image
                        src="{imageUrl}"
                        width="100%"
                        densityAware="false" />
                </VBox>

                <!-- Right Column (Details) -->
                <VBox>
                    <layoutData>
                        <!-- This forces the details to take up 50% width -->
                        <FlexItemData baseSize="50%" growFactor="2" />
                    </layoutData>
                    
                    <ObjectHeader
                        title="{name}"
                        number="{
                            parts: [{path: 'price'}, {path: 'currency'}],
                            type: 'sap.ui.model.type.Currency',
                            formatOptions: { showMeasure: true }
                        }">
                        <statuses>
                         <ObjectStatus
    text="{path: 'stock/quantity', formatter: '.formatter.stockText'}"
    state="{path: 'stock/quantity', formatter: '.formatter.stockState'}" />
                        </statuses>
                    </ObjectHeader>

                    <VBox class="sapUiSmallMarginBottom">
                        <Title text="Description" level="H4" class="sapUiTinyMarginBottom"/>
                        <Text text="{description}" wrapping="true" />
                    </VBox>

                    <HBox alignItems="Center" class="sapUiSmallMarginBottom">
                        <Label text="Quantity:" class="sapUiSmallMarginEnd" />
                <StepInput
    value="{ui>/quantity}"
    min="1"
    max="{stock/quantity}"
    width="140px"
    enabled="{path: 'stock/quantity', formatter: '.formatter.isStockAvailable'}" />

                    </HBox>

                    <HBox>
                        <Button
                            text="Add to Cart"
                            icon="sap-icon://cart-add"
                            type="Emphasized"
                            
                            press=".onAddToCart"
                            class="sapUiSmallMarginEnd" />
                        <Button
                            text="Buy Now"
                            icon="sap-icon://credit-card"
                            type="Accept"
                            enabled="{path: 'stock/quantity', formatter: '.formatter.isStockAvailable'}"
                            press=".onBuyNow" />
                    </HBox>
                </VBox>
            </FlexBox>

            <VBox class="sapUiLargeMarginTop">

    <Title text="Customer Reviews" level="H3"/>

    <VBox items="{reviews>/reviews}">

        <items>

            <VBox class="sapUiSmallMarginBottom sapUiSmallPadding sapUiResponsiveContentPadding sapUiBorder">

                <HBox justifyContent="SpaceBetween">

                    <Text
                        text="{reviews>customer/name}"
                        class="sapUiTinyMarginBottom"
                        wrapping="false"/>

                    <ObjectNumber
                        number="{reviews>rating}"
                        unit="â˜…"
                        state="Success"/>

                </HBox>

                <Title
                    text="{reviews>title}"
                    level="H5"
                    class="sapUiTinyMarginBottom"/>

                <Text
                    text="{reviews>comment}"
                    wrapping="true"/>

            </VBox>

        </items>

    </VBox>

</VBox>

        </content>
    </Page>
</mvc:View>